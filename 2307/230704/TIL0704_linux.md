# Linux

리눅스 - 운영체제(OS)
    - 운영체제 - 하드웨어를 제어해주는 프로그램
        - 하드웨어
            - CPU - 연산 담당
            - 메모리 - 연산할 대상의 저장공간
            - 스토리지(하드디스크) - 영구적인 저장공간
            - 네트워트
        - 제어
            - CPU- 연산의 스케줄링, 멀티태스킹 역할
            - 메모리 - 저장공간 관리 역할
            - 스토리지      
            -디스크를 돌리고 빈 공간을 찾아서 저장시키는 역할        
            -저장된 데이터를 다시 읽어오는 역할
            - 네트워크 - 통신 역할
    
커널(kernel)
- 커널 - 시스템 자원(CPU, 메모리, 스토리지, 네트워크)을 효율적으로 관리, 제어하는 관리자
    - GUI, 제어판, 크롬 브라우저, 파일 탐색기 등
- os = 커널 + 응용프로그램
    - 커널과 운영체제를 혼용하여 사용하지만 엄밀히 다른 것임

리눅스를 많이 사용하는 이유
- 다른 운영체제의 목적은 상업용 -> 원천 코드 비공개       
- 리눅스는 오픈소스 형태 -> 원천 코드 열람 가능(www.kernel.org) -> 회사에 맞게 개별적 변경이 가능
- 무료 - 많은 서버를 사용하는 기업의 비용 부담을 덜어준다.
- 버그나 보안이슈 단점 - 즉시 패치나 업데이트를 제공하지 않음 -> 개선되고 있음

리눅스 배포판
- 원천(kernel) 코드를 다운받아 일부 수정하고 응용프로그램을 추가해 배포판이라는 형태의 운영체제로 다시 출시
- 많이 사용하는 배포판
    - 슬랙웨어 
        - 첫 배포판, 실제 사용하지는 않는다.
        - 하드웨어 호완성이 좋지만 GUI가 지원되지 않음
    - 수세
        - 슬랙웨어 개량
        - open SUSE
        - Enterprise SUSE
        - 국내에서는 많이 사용하지 않음
    - 데비안
        - GNU정신, GNU의 후원
        - 많이 사용하지 않음
        - 사용하기 편하지 않아서
    - ***우분투***
        - 데비안을 개량
        - 개발환경에서 많이 사용
        - 사용자 편의성이 좋음. UI가 좋다
        - 업데이트 주기 짧음
        - 클라우드/가상화 환경에서 많이 사용
    - 레드햇
        - 개발환경에서 사용할 일은 별로 없음
        - 서버환경에서 많이 사용
        - 유지 보수 관리 상용화
    - 페도라
        - 레스햇의 공개 배포판
        - 레드햇의 테스트 버전 형태
        - 다양한 새로운 기능
    - 센트오에스
        - 레드햇의 클론버전
        - 레드햇을 자유롭게 사용할 수 있도록 함
    - 로키(Rocky)
        - 센트오에스가 레드햇에 인수되어 단종되었는데 센트오에스를 대신함

실습 환경 구성
- 가상머신 - 논리적 서버, 시스템 자원의 일부를 사용하여 만듦
- virtualbox프로그램 사용(https://www.virtualbox.org/) - 가상머신을 만들고 관리하는 역할
    - virtualbox프로그램 설치
        - https://www.virtualbox.org -> Downloads -> windows host
        - 다운로드 된 프로그램 설치 -> Next ... -> Finish
    - 가상머신 가져오기(import)
        - Oracle VM VirtualBox 관리자 실행
        - 파일탭 -> 가상 시스템 가져오기 -> 파일에서 파일탐색기 모양 선택 -> 미리 다운받은 'Ubuntu.ova'선택(https://drive.google.com/file/d/1ndHKftRnz9DIweIuv-qWgAxZSRg_-F5N/view?usp=sharing에서 미리 설치) -> MAC 주소 정책: 모든 네트워크 어댑터의 새 MAC 주소 생성 -> Finish
    - 가상머신 시작하기
        - Ubuntu 가상 머신 선택 -> (연두색 화살표) 시작
        - Ubuntu 가상머신 콘솔 상단 메뉴 -> 입력 -> 키보드 -> 키보드 설정 -> 호스트키 조합 단축키를 지우개로 지우고 ctrl+alt키를 누름 -> 확인
    - Ubuntu 로그인
        - id: ubuntu / password: ubuntu
    - 마우스 우클릭 -> open in terminal
        - ctrl + shift + [+] - 터미널 확대
        - ctrl + [-] - 터미널 축소

리눅스
- 명령어 라인 구성하기
    - $ command [-options] [argument]
    - date - 현재 시간
    - echo: 문자열 출력

- 사용자 정보 확인 id
    - 리눅스에 접근하기 위해서는 계정이 필요
    - id: 내가 시스템에서 어떤 계정으로, 어떤 사용자로 취급되고있는지를 알려줌
        - uid: 계정을 식별할 유일한 번호
        - group: 그룹번호(그룹이름) - 만들어진 계정은 반드시 소속된 그룹을 갖는다. 멤버는 같은 권한을 갖는다. 여러 그룹에 소속될 수 있다.
        - gid: 일차그룹 - 높은 우선순위를 갖는 그룹
    - 옵션은 사용빈도가 낮음

- who - 서버에 누가 로그인되어 있는지 확인

- passwd - 계정의 암호를 변경/다시지정
    - 일반 사용자는 본인의 비밃번호만 가능
    - 관리자는 모든 비밀번호 가능

- 리눅스 사용자 계정
    - 일반 사용자
    - 관리자(root)
        - 권한에 대한 제약이 없음
        - 운영에 관련된 전반적인 일을 할 수 있음

- ***사용자 전환***
    - su(switch user) - 다른 사용자로 전환
        - su - root: root로 전환 / exit: 이전 사용자로 전환
        - root로 전환하려면 root 비밀번호를 입력해야 함     
        -> 모든 사용자에게 root 비밀번호를 알려줘야 함      
        -> 단점
    - sudo(switch user do) - 명령어 하나만 다른 사용자의 권한으로 실행
        - 관리자에 의해 sudo 권한을 받아야 함 - id group에서 sudo그룹에 소속되어있어야 함
        - 사용자의 비밀번호를 입력해야 함
        - root 비밀번호를 입력할 필요가 없어 su보다 보안상 유리
        - 단점 - 매번 sudo를 입력해야 함

- useradd - 사용자 계정을 추가(관리자만 가능)
    - sudo useradd yumi

- 시스템 정보 수집하기
    - who - 사용자 이름 단말 로그인 시간
    - 배포판의 버전 등 확인
        - lsb_release -a
        - cat /etc/os-release
    - kernel 버전확인
        - uname -a / uname -r
    - 하드웨어 정보
        - cpu정보 - cat /proc/cpuinfo, lscpu
        - 메모리 정보 - free, free -h
        - disk - lsscsi, lsblk
        - 네트워크 
            - uname -n, hostname
                - hostname(=내컴퓨터이름)
            - ip addr, ip a
                - inet 10.0.2.15
            - ping google.com - 통신이 잘 이루어지는지 확인(메시지를 보내고 응답이 오는지 확인)
                - ctrl + c로 중단

디렉토리
- 윈도우에서 폴더의 의미
- 트리 형태의 자료구조
    - pwd(present working directory) - 현재 디렉토리 확인
- 최상위를 /로 쓰고 root라 읽음

경로
- 절대 경로 - 파일의 위치를 최상위 노드(/)를 기준으로 정의한 경로
- 상대 경로 - 현재 사용자가 위치를 기준으로 정의한 경로
    - .: 현재 디렉토리를 의미
    - ..: 작업 디렉토리의 하나 상위 디렉토리를 의미

- cd - 사용자의 위치 변경
    - cd [디렉토리경로]
    - 디렉토리 경로가 없으면 사용자 계정의 홈 디렉토리로 변경(처음 로그인했을 때 디렉토리)
- mkdir(make directory) - 새로운 디렉토리 생성
    - mkdir 디렉토리이름 디텍토리이름 ... - 여러 디렉토리 한번에 생성 가능
    - fruit/apple/grape를 한번에 만들 수 없음 - mkdir -p로 가능     
    -만들어 지지 않은 부모디렉토리까지 만들 수 있음
    - tree fruit - 트리구조로 디렉토리 확인가능
- rmdir(remove directory) - 디렉토리 삭제
    - 빈 디렉토리만 지울 수 있음 - 가장 하위 디렉토리부터 하나씩 지워야한다.    
    -> 쓰지않는다.
    - ***복원불가***
    - 현재 위치하거나 접근 중인 디렉토리는 지울 수 없음
- rm - 파일이나 디렉토리를 삭제하는 명령어
    - rm -r(recursive) - 하위계층까지 모두 지움
    - ***복원불가***

파일 관리
- 일반적으로 확장자를 가지지 않음
- 대소문자 구분
- ls - 파일이나 디렉토리의 리스트 출력
    - ls [옵션] [디렉토리 이름]
    - ls -a : 숨김파일까지 출력
    - ls -l : 자세히 출력(보는 형식이 달라짐 날짜 등을 출력)
        - ***결과***
            1. 파일의 종류, 접근 권한
                - d: directory
                - -: 파일
                - l: 링크(윈도우의 바로가기)
            2. 링크 수
            3. 파일의 소유자
            4. 파일의 소유그룹
            5. 파일의 데이터 크기(용량) - byte 단위
            6. 파일의 생성 일자 또는 마지막 수정일자
            7. 파일의 이름 또는 디렉토리 이름
    - ls -h : 파일 크기를 사람이 인식하기 쉬운 형태로 출력
    - ls -a -l : 숨김파일 + 자세히
        - ls -al 으로 표현 가능

- cat - 텍스트 파일의 내용을 표준 출력 장치로 출력
    - cat [옵션] 텍스트파일명
    - 파일 전체를 한꺼번에 출력 - 한 화면에 보여줄 수 있는 짧은 파일을 볼 때 사용
- less - 긴 텍스트 파일을 볼 때 사용
    - less [옵션] 텍스트파일명

- touch - 파일의 시간 정보 갱신
    - 아무 옵션 없이 사용되면 서버의 현재시간으로 변경
    - 존재 하지 않는 파일명을 인수로 사용하면 사이즈가 0인 빈파일을 생성함
    - touch -mt 07040300 emptyfile - 특정시간(07040300)으로 변경 가능

- cp - 파일 또는 디렉토리 복사 / 붙여넣기
    - cp [옵션] source [source ...] target
    - source들을 복사하여 target에 붙여넣기
    - target이 존재하지 않으면 생성하여 붙여넣기함
    - target은 디렉토리가 될 수 있음
    - cp-r 디렉토리1 디렉토리2 - 디렉토리1을 복사하여 디렉토리2에 붙여넣기

- echo 문자열 > 파일명 - 문자열을 파일로 만듦

- mv(move) - 파일 또는 디렉토리를 잘라내기 후 붙여넣기
    - mv f1 f.new - 이름이 f1에서 f.new로 변경됨
        - 리눅스는 파일 이름 바꾸기 명령어가 없다 -> mv를 이용하여 변경가능
    - mv f.new backup - 파일을 디렉토리로 이동
    - mv backup /tmp - 디렉토리를 디렉토리로 이동

- rm - 파일이나 디렉토리를 삭제
    - ***복원 불가***
    - rm f2 - 파일 삭제
    - rm-r backup.old - 디렉토리 삭제

파일 권한
- 소유권(ownership) - 특정 파일이나 디렉토리가 누구의 소유인가
    - 소유권은 관리자만 바꿀 수 있음
    - chown(change owner) - sudo chown root yumifile -> yumifile의 소유자를 root로 변경
        - 소유자와 소유그룹 모두 바꿀 수 있음 - sudo chown ubuntu:ubuntu yumifile
        - ls -l에서 소유자 소유그룹 확인 가능
- 허가권(permission) - 특정 파일이나 디렉토리가 누구에게 연산이 허락됐는가
    - 권한
        - 읽기(r)
            - 파일 읽기 - 내용을 볼 수 있는 권한
            - 디렉토리 읽기 - 디렉토리 하위 목록을 볼 수 있는 권한
                - ls -ld로 확인 가능
        - 쓰기(w)
            - 파일 쓰기 - 내용을 수정할 수 있는 권한
            - 디렉토리 쓰기 - 목록을 생성 이동 삭제할 수 있는 권한
        - 실행(x)
            - 파일 실행 - 파일을 명령어처럼 실행할 수 있는 권한
            - 디렉토리 실행 - 디렉토리로 들어갈 수 있는 권한
    - rw-rw-r--: 앞세자리 소유자, 중간 세자리 소유그룹, 마지막세자리 기타사용자
        - user(소유자), group(소유그룹), others(기타사용자: 파일의 소유자도아니고 소유그룹의 멤버도 아닌 사용자)
        - 소유자 - 읽기(r) 쓰기(w)
        - 소유그룹 - 읽기(r) 쓰기(w)
        - 기타사용자 - 읽기(r)
    - 파일 허가권 변경(chmod)
        - 기호 모드
        - chmod 대상 [+|-|=] 권한 파일 - chmod u+x,g=rx,o-r afile
            - 대상
                - u: 사용자
                - g: 그룹
                - o: 기타사용자
            - 연산
                - +: 권한 추가
                - -: 권한 취소
                - =: 권한 변경
        - 8진수 허가모드
            - rwxr-xr-x     
            -> 111|101|101    
            -> 7|5|5 -> 755
            - chmod 755 afile

- nano tset.sh - 메모장 처럼 사용가능
    - 내용 입력
    - 단축키에서 ^는 ctrl을 의미

- 프로세스 - 실행중인 프로그램
    - ps(process show) - 현재 시스템에서 수행중인 프로세스에 대한 정보
    - ps -e(every) - 모든 프로세스 보기
        - PID - 프로세스 번호, 유일하게 식별
        - time - 수행시간
        - CMD - 프로세스 이름
    - ps -ef(full) - 자세하게 보기
        - ppid - 부모 프로세스(나를 실행시킨 프로세스)
        - stime - 시작 시간
        - ps -ef | grep sleep - sleep이라는 문자열을 갖는 프로세스만 봄
    - top - 주기적으로 프로세스의 정보를 보여줌(작업관리자 처럼)
        - cpu를 많이 사용하는 순서로 보여줌
        - q를 눌러 중지
    - ***kill*** - 프로세스에게 시그널(메시지, 명령어)을 전달
        - kill -l: 시그널목록을 보여줌
        - SIGINT(interupt): 실행중인 프로세스 중단
        - 15) SIGTERM(terminate): 정상 종료
        - 9) SIGKILL(kill): 강제 종료, 무시할 수 없는 시그널
        - kill -9(강제종료 시그널번호) 프로세스번호
            - 시그널번호가 없으면 SIGINT를 의미

워드프레스를 활용한 웹 서버 구성